{% extends "sentry/groups/details.html" %}

{% load i18n %}
{% load sentry_helpers %}

{% block inner %}
    {% paginate event_list from request as event_list per_page EVENTS_PER_PAGE %}

    {% if event_list.objects %}
        {% url 'sentry-help' as link %}
        <p class="alert alert-info">{% blocktrans %}This list only contains a portion of all events seen. For more information about how Sentry samples events, see the <a href="{{ link }}">documentation</a>.{% endblocktrans %}</p>

        <ul class="events similar-events">
            {% for event in event_list.objects %}

                <li class="event">
                    <div class="event-details event-cell">
                        <h3>
                            <a href="{% url 'sentry-group-event' event.team.slug event.project.slug event.group_id event.pk %}">
                            {{ event.message }} </br>
                            </a>
                        </h3>
                        <div class="meta">
                            <span class="last-seen pretty-date" title="{{ event.datetime|date:"c" }}Z">{{ event.datetime|date:"j.n.Y. H:i:s" }}</span>
                            {% if event.time_spent %}
                                <span class="time-spent">{{ event.time_spent|duration }}</span>
                            {% endif %}
                            <ul class="mini-tag-list">
                            {% for fevent in full_list %}
                                {%  if fevent.id == event.id %}
                                    <li>
                                        <strong>{{ fevent.eventfiltertagvalue__grouptagvalue__key  }}</strong>
                                        <em>=</em>
                                        <span><a href="{% url 'sentry-stream' group.team.slug group.project.slug %}?{{ fevent.eventfiltertagvalue__grouptagvalue__key  }}={{ fevent.eventfiltertagvalue__grouptagvalue__value }}">{{ fevent.eventfiltertagvalue__grouptagvalue__value }}</a> {% if fevent.eventfiltertagvalue__grouptagvalue__value|is_url %}<a href="{{ fevent.eventfiltertagvalue__grouptagvalue__value }}" class="icon-share"></a>{% endif %}</span>
                                    </li>
                                {% endif %}
                            {% endfor %}
                            </ul>
                        </div>
                    </div>
                </li>
            {% endfor %}
        </ul>

        {{ event_list.paging }}

    {% else %}
        <p class="alert alert-notice">{% trans "There are no records recorded for this event." %}</p>
    {% endif %}

{% endblock %}
