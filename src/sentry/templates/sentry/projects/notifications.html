{% extends "sentry/projects/manage.html" %}

{% load crispy_forms_tags %}
{% load i18n %}
{% load sentry_helpers %}

{% block title %}{% trans "Notifications" %} | {{ block.super }}{% endblock %}

{% block controller %}ManageProjectNotificationsCtrl{% endblock %}

{% block inner %}
    <h3>{% trans "Notifications" %}</h3>
    <form action="." method="post" class="form-stacked">
        {% csrf_token %}
        <div class="box">
          <div class="box-header">
              <h3>{% trans "Events" %}</h3>
          </div>
          <div class="box-content with-padding">

            {% url 'sentry-project-rules' team.slug project.slug as link %}
            <p>{% blocktrans %}Sentry will notify you based on the <a href="{{ link }}">rules configured for this project</a>.{% endblocktrans %}</p>
          </div>
        </div>
        <div class="box">
          <div class="box-header">
              <h3>{% trans "General" %}</h3>
          </div>
          <div class="box-content with-padding">
            {{ general_form|as_crispy_errors }}

            {% for field in general_form %}
                {{ field|as_crispy_field }}
            {% endfor %}
          </div>
        </div>

        <div class="box">
          <div class="box-header">
              <h3>{% trans "Alerts" %}</h3>
          </div>
          <div class="box-content with-padding">
            <p>{% blocktrans %}Alerts are triggered when the rate of events for the entire project increase by a relative amount. Values represent a 60-second interval.{% endblocktrans %}</p>

            {{ alert_form|as_crispy_errors }}

            {% for field in alert_form %}
                {{ field|as_crispy_field }}
            {% endfor %}
          </div>
        </div>

        <fieldset class="form-actions" style="border-top: 0; padding-top: 0;">
            <button type="submit" class="btn btn-primary btn-lg">{% trans "Save Changes" %}</button>
        </fieldset>
    </form>
{% endblock %}
